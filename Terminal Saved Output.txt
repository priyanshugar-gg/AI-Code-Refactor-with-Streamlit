Last login: Fri Jul 18 00:57:17 on ttys001
(base) priyanshugar_gg@Priyanshus-MacBook-Pro ~ % cd ~/Desktop/ai-code-refactor

(base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % source venv/bin/activate
(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % python main.py

Traceback (most recent call last):
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/main.py", line 3, in <module>
    from llm_assistant import get_suggestions
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/llm_assistant.py", line 2, in <module>
    from dotenv import load_dotenv
ModuleNotFoundError: No module named 'dotenv'
(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % pip install python-dotenv

Collecting python-dotenv
  Downloading python_dotenv-1.1.1-py3-none-any.whl.metadata (24 kB)
Downloading python_dotenv-1.1.1-py3-none-any.whl (20 kB)
Installing collected packages: python-dotenv
Successfully installed python-dotenv-1.1.1
(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % python main.py

Enter GitHub repo URL: https://github.com/nyukat/breast_cancer_classifier.git
‚¨áÔ∏è Cloning repository...
^[[C^[[D^[[C^[[D^[[D
üîç Analyzing code complexity...

üîê Analyzing security vulnerabilities...

ü§ñ Getting suggestions from GPT-4o...
Traceback (most recent call last):
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/main.py", line 16, in <module>
    suggestions = get_suggestions(str(complexity_issues), security_issues)
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/llm_assistant.py", line 18, in get_suggestions
    response = openai.ChatCompletion.create(
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/venv/lib/python3.9/site-packages/openai/lib/_old_api.py", line 39, in __call__
    raise APIRemovedInV1(symbol=self._symbol)
openai.lib._old_api.APIRemovedInV1: 

You tried to access openai.ChatCompletion, but this is no longer supported in openai>=1.0.0 - see the README at https://github.com/openai/openai-python for the API.

You can run `openai migrate` to automatically upgrade your codebase to use the 1.0.0 interface. 

Alternatively, you can pin your installation to the old version, e.g. `pip install openai==0.28`

A detailed migration guide is available here: https://github.com/openai/openai-python/discussions/742

(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % pip install --upgrade openai

Requirement already satisfied: openai in ./venv/lib/python3.9/site-packages (1.97.0)
Requirement already satisfied: anyio<5,>=3.5.0 in ./venv/lib/python3.9/site-packages (from openai) (4.9.0)
Requirement already satisfied: distro<2,>=1.7.0 in ./venv/lib/python3.9/site-packages (from openai) (1.9.0)
Requirement already satisfied: httpx<1,>=0.23.0 in ./venv/lib/python3.9/site-packages (from openai) (0.28.1)
Requirement already satisfied: jiter<1,>=0.4.0 in ./venv/lib/python3.9/site-packages (from openai) (0.10.0)
Requirement already satisfied: pydantic<3,>=1.9.0 in ./venv/lib/python3.9/site-packages (from openai) (2.11.7)
Requirement already satisfied: sniffio in ./venv/lib/python3.9/site-packages (from openai) (1.3.1)
Requirement already satisfied: tqdm>4 in ./venv/lib/python3.9/site-packages (from openai) (4.67.1)
Requirement already satisfied: typing-extensions<5,>=4.11 in ./venv/lib/python3.9/site-packages (from openai) (4.14.1)
Requirement already satisfied: exceptiongroup>=1.0.2 in ./venv/lib/python3.9/site-packages (from anyio<5,>=3.5.0->openai) (1.3.0)
Requirement already satisfied: idna>=2.8 in ./venv/lib/python3.9/site-packages (from anyio<5,>=3.5.0->openai) (3.10)
Requirement already satisfied: certifi in ./venv/lib/python3.9/site-packages (from httpx<1,>=0.23.0->openai) (2025.7.14)
Requirement already satisfied: httpcore==1.* in ./venv/lib/python3.9/site-packages (from httpx<1,>=0.23.0->openai) (1.0.9)
Requirement already satisfied: h11>=0.16 in ./venv/lib/python3.9/site-packages (from httpcore==1.*->httpx<1,>=0.23.0->openai) (0.16.0)
Requirement already satisfied: annotated-types>=0.6.0 in ./venv/lib/python3.9/site-packages (from pydantic<3,>=1.9.0->openai) (0.7.0)
Requirement already satisfied: pydantic-core==2.33.2 in ./venv/lib/python3.9/site-packages (from pydantic<3,>=1.9.0->openai) (2.33.2)
Requirement already satisfied: typing-inspection>=0.4.0 in ./venv/lib/python3.9/site-packages (from pydantic<3,>=1.9.0->openai) (0.4.1)
(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % source venv/bin/activate

(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % python main.py
Enter GitHub repo URL: https://github.com/nyukat/breast_cancer_classifier.git
üì¶ Repo already exists. Pulling latest changes...

üîç Analyzing code complexity...

üîê Analyzing security vulnerabilities...

ü§ñ Getting suggestions from GPT-4o...
Traceback (most recent call last):
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/main.py", line 16, in <module>
    suggestions = get_suggestions(str(complexity_issues), security_issues)
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/llm_assistant.py", line 21, in get_suggestions
    response = client.chat.completions.create(
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/venv/lib/python3.9/site-packages/openai/_utils/_utils.py", line 287, in wrapper
    return func(*args, **kwargs)
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/venv/lib/python3.9/site-packages/openai/resources/chat/completions/completions.py", line 1087, in create
    return self._post(
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/venv/lib/python3.9/site-packages/openai/_base_client.py", line 1256, in post
    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))
  File "/Users/priyanshugar_gg/Desktop/ai-code-refactor/venv/lib/python3.9/site-packages/openai/_base_client.py", line 1044, in request
    raise self._make_status_error_from_response(err.response) from None
openai.RateLimitError: Error code: 429 - {'error': {'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.', 'type': 'insufficient_quota', 'param': None, 'code': 'insufficient_quota'}}
(venv) (base) priyanshugar_gg@Priyanshus-MacBook-Pro ai-code-refactor % 
